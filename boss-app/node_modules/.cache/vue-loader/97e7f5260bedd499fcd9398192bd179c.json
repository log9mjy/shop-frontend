{"remainingRequest":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\shop-frontend\\boss-app\\src\\view\\wrapper\\home-ad\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\shop-frontend\\boss-app\\src\\view\\wrapper\\home-ad\\index.vue","mtime":1648822953280},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1632657941543},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1632657960293}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVXBsb2FkIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvdXBsb2FkIjsKaW1wb3J0IHthZF9hZGQsIGFkX2RlbCwgYWRfZWRpdCwgYWRfbGlzdCwgdHlwZSwgYWRfYXVkaXR9IGZyb20gIi4uLy4uLy4uL2FwaS9hZCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiaW5kZXgiLAogICAgY29tcG9uZW50czogewogICAgICAgIFVwbG9hZAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgICAgICAgdHlwZTogJ2FkZCcsCiAgICAgICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAgICAgICBmb3JtOiB7CiAgICAgICAgICAgICAgICBhZHZlcnRfbmFtZTogJycsCiAgICAgICAgICAgICAgICBhZHZlcnRfdHlwZTogJycsCiAgICAgICAgICAgICAgICBsaW5rOiAnJywKICAgICAgICAgICAgICAgIGltZ0xpc3Q6IHt9LAogICAgICAgICAgICAgICAgbm90ZTogJycsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgICAgICBhZHZlcnRfbmFtZTogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpSd9XSwKICAgICAgICAgICAgICAgIGFkdmVydF90eXBlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oupJ31dLAogICAgICAgICAgICAgICAgaW1nTGlzdDogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+S4iuS8oCd9XSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2VhcmNoRm9ybTogewogICAgICAgICAgICAgICAgZGlzYWJsZV9zdGF0dXM6ICcnLAogICAgICAgICAgICAgICAgYWR2ZXJ0X3R5cGU6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBhZ2VOdW1iZXI6IDEsCiAgICAgICAgICAgIHR5cGVPcHRpb25zOiBbXSwKICAgICAgICAgICAgYXVkaXRPcHRpb25zOiBbXSwKICAgICAgICAgICAgZWRpdElkOiAwLAogICAgICAgICAgICB0b3RhbDogMAogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgIHR5cGUoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMudHlwZU9wdGlvbnMgPSByZXMubGlzdC5hZHZlcnRUeXBlOwogICAgICAgICAgICB0aGlzLmF1ZGl0T3B0aW9ucyA9IHJlcy5saXN0LmRpc2FibGVTdGF0dXM7CiAgICAgICAgfSkKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgY2hhbmdlU3RhdHVzKGlkLCBzdGF0dXMsIGRhdGEpIHsKICAgICAgICAgICAgYWRfYXVkaXQoe2lkLCBkaXNhYmxlX3N0YXR1czogc3RhdHVzfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICBkYXRhLmRpc2FibGVfc3RhdHVzID0gc3RhdHVzOwogICAgICAgICAgICAgICAgbGV0IG1zZyA9IHN0YXR1cyA9PT0gMSA/ICflt7LlkK/nlKgnIDogJ+W3suWBnOeUqCc7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MobXNnKTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGN1cnJlbnRDaGFuZ2UoZSkgewogICAgICAgICAgICB0aGlzLnBhZ2VOdW1iZXIgPSBlOwogICAgICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgICB9LAogICAgICAgIHNlYXJjaCgpIHsKICAgICAgICAgICAgdGhpcy5wYWdlTnVtYmVyID0gMTsKICAgICAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICAgICAgfSwKICAgICAgICByZXNldCgpIHsKICAgICAgICAgICAgdGhpcy5zZWFyY2hGb3JtID0gewogICAgICAgICAgICAgICAgZGlzYWJsZV9zdGF0dXM6ICcnLAogICAgICAgICAgICAgICAgYWR2ZXJ0X3R5cGU6ICcnCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRlbChpZCkgewogICAgICAgICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTliKDpmaTor6Xlub/lkYrkvY0/JykKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBhZF9kZWwoe2lkfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgb3BlbkRpYWxvZyh0eXBlLCBkYXRhKSB7CiAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIGlmICh0eXBlID09PSAnYWRkJykgewogICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gewogICAgICAgICAgICAgICAgICAgIGFkdmVydF9uYW1lOiAnJywKICAgICAgICAgICAgICAgICAgICBhZHZlcnRfdHlwZTogJycsCiAgICAgICAgICAgICAgICAgICAgbGluazogJycsCiAgICAgICAgICAgICAgICAgICAgaW1nTGlzdDoge30sCiAgICAgICAgICAgICAgICAgICAgbm90ZTogJycsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmVkaXRJZCA9IGRhdGEuaWQ7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0X25hbWU6IGRhdGEuYWR2ZXJ0X25hbWUsCiAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0X3R5cGU6IGRhdGEuYWR2ZXJ0X3R5cGUgKyAiIiwKICAgICAgICAgICAgICAgICAgICBsaW5rOiBkYXRhLmxpbmssCiAgICAgICAgICAgICAgICAgICAgaW1nTGlzdDogewogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBkYXRhLmltZywKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBkYXRhLmltZ0xpc3QKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG5vdGU6IGRhdGEubm90ZSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc3VibWl0KCkgewogICAgICAgICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0X25hbWU6IHRoaXMuZm9ybS5hZHZlcnRfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0X3R5cGU6IHRoaXMuZm9ybS5hZHZlcnRfdHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgbGluazogdGhpcy5mb3JtLmxpbmssCiAgICAgICAgICAgICAgICAgICAgICAgIGltZ0xpc3Q6IHRoaXMuZm9ybS5pbWdMaXN0LnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgaW1nOiB0aGlzLmZvcm0uaW1nTGlzdC5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICBub3RlOiB0aGlzLmZvcm0ubm90ZSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdhZGQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkX2FkZChwYXJhbXMpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmt7vliqDmiJDlip8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdlZGl0JykgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuaWQgPSB0aGlzLmVkaXRJZDsKICAgICAgICAgICAgICAgICAgICAgICAgYWRfZWRpdChwYXJhbXMpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv67mlLnmiJDlip8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGdldERhdGEoKSB7CiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBkaXNhYmxlX3N0YXR1czogdGhpcy5zZWFyY2hGb3JtLmF1ZGl0X3N0YXR1cywKICAgICAgICAgICAgICAgIGFkdmVydF90eXBlOiB0aGlzLnNlYXJjaEZvcm0uYWR2ZXJ0X3R5cGUsCiAgICAgICAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2VOdW1iZXIsCiAgICAgICAgICAgICAgICBwYWdlU2l6ZTogMTAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgYWRfbGlzdChwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmxpc3Q7CiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuY291bnQ7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICB1cGxvYWQoZSkgewogICAgICAgICAgICB0aGlzLmZvcm0uaW1nTGlzdCA9IGU7CiAgICAgICAgfSwKICAgICAgICBkZWxJbWFnZSgpIHsKICAgICAgICAgICAgdGhpcy5mb3JtLmltZ0xpc3QgPSB7fQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/wrapper/home-ad","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"search-form\">\r\n            <el-form :inline=\"true\" size=\"small\">\r\n                <el-form-item label=\"位置\">\r\n                    <el-select v-model=\"searchForm.advert_type\" style=\"width: 100px\" clearable>\r\n                        <el-option v-for=\"item in typeOptions\" :key=\"item.code\" :label=\"item.name\"\r\n                                   :value=\"item.code\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"状态\">\r\n                    <el-select v-model=\"searchForm.audit_status\" style=\"width: 100px\" clearable>\r\n                        <el-option v-for=\"item in auditOptions\" :key=\"item.code\" :label=\"item.name\"\r\n                                   :value=\"item.code\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"search\">查询</el-button>\r\n                    <el-button icon=\"el-icon-refresh-left\" @click=\"reset\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n        <div class=\"table-view\">\r\n            <div class=\"add-view\">\r\n                <el-button icon=\"el-icon-plus\" type=\"primary\" plain @click=\"openDialog('add')\">新增</el-button>\r\n            </div>\r\n            <el-table :data=\"tableData\" style=\"width: 100%\" align=\"center\">\r\n                <el-table-column prop=\"id\" label=\"编号\"></el-table-column>\r\n                <el-table-column prop=\"advert_name\" label=\"广告名称\"></el-table-column>\r\n                <el-table-column prop=\"advert_type_name\" label=\"位置\"></el-table-column>\r\n                <el-table-column label=\"广告图\" show-overflow-tooltip>\r\n                    <template slot-scope=\"scope\">\r\n                        <el-image class=\"table-image\" fit=\"cover\" :src=\"scope.row.imgList\"\r\n                                  :preview-src-list=\"scope.row.imgList | toArray\"></el-image>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"link\" label=\"路径\" show-overflow-tooltip></el-table-column>\r\n                <el-table-column prop=\"disable_status_name\" label=\"状态\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button size=\"mini\" v-if=\"scope.row.disable_status===2\" type=\"text\"\r\n                                   @click=\"changeStatus(scope.row.id,1,scope.row)\">停用\r\n                        </el-button>\r\n                        <el-button v-else size=\"mini\" type=\"text\"\r\n                                   @click=\"changeStatus(scope.row.id,2,scope.row)\">\r\n                            启用\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"note\" label=\"备注\" show-overflow-tooltip>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" width=\"200px\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-edit\" @click=\"openDialog('edit',scope.row)\">\r\n                            编辑\r\n                        </el-button>\r\n                        <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" @click=\"del(scope.row.id)\">删除\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </div>\r\n        <el-pagination class=\"page\" background layout=\"total,prev, pager, next\" :total=\"total\"\r\n                       @current-change=\"currentChange\"></el-pagination>\r\n        <el-dialog :title=\"type==='add'?'添加广告':'编辑广告'\" :visible.sync=\"dialogVisible\" width=\"400px\">\r\n            <el-form ref=\"form\" size=\"small\" :model=\"form\" label-width=\"60px\" :rules=\"rules\">\r\n                <el-form-item label=\"标题\" prop=\"advert_name\">\r\n                    <el-input v-model=\"form.advert_name\" placeholder=\"标题\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"位置\" prop=\"advert_type\">\r\n                    <el-select v-model=\"form.advert_type\" style=\"width: 100px\" clearable>\r\n                        <el-option v-for=\"item in typeOptions\" :key=\"item.code\" :label=\"item.name\"\r\n                                   :value=\"item.code\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"广告\" prop=\"imgList\">\r\n                    <upload :limit=\"1\" :file-list=\"form.imgList.url |toArray\" @success=\"upload\"\r\n                            @del=\"delImage\"></upload>\r\n                </el-form-item>\r\n                <el-form-item label=\"跳转\">\r\n                    <el-input v-model=\"form.link\" placeholder=\"跳转\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"备注\">\r\n                    <el-input v-model=\"form.note\" placeholder=\"备注\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\r\n                <el-button size=\"small\" type=\"primary\" @click=\"submit\">确 定</el-button>\r\n       </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import Upload from \"../../../components/upload\";\r\n    import {ad_add, ad_del, ad_edit, ad_list, type, ad_audit} from \"../../../api/ad\";\r\n\r\n    export default {\r\n        name: \"index\",\r\n        components: {\r\n            Upload\r\n        },\r\n        data() {\r\n            return {\r\n                tableData: [],\r\n                type: 'add',\r\n                dialogVisible: false,\r\n                form: {\r\n                    advert_name: '',\r\n                    advert_type: '',\r\n                    link: '',\r\n                    imgList: {},\r\n                    note: '',\r\n                },\r\n                rules: {\r\n                    advert_name: [{required: true, message: '请输入'}],\r\n                    advert_type: [{required: true, message: '请选择'}],\r\n                    imgList: [{required: true, message: '请上传'}],\r\n                },\r\n                searchForm: {\r\n                    disable_status: '',\r\n                    advert_type: ''\r\n                },\r\n                pageNumber: 1,\r\n                typeOptions: [],\r\n                auditOptions: [],\r\n                editId: 0,\r\n                total: 0\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getData();\r\n            type().then(res => {\r\n                this.typeOptions = res.list.advertType;\r\n                this.auditOptions = res.list.disableStatus;\r\n            })\r\n        },\r\n        methods: {\r\n            changeStatus(id, status, data) {\r\n                ad_audit({id, disable_status: status}).then(() => {\r\n                    data.disable_status = status;\r\n                    let msg = status === 1 ? '已启用' : '已停用';\r\n                    this.$message.success(msg);\r\n                })\r\n            },\r\n            currentChange(e) {\r\n                this.pageNumber = e;\r\n                this.getData();\r\n            },\r\n            search() {\r\n                this.pageNumber = 1;\r\n                this.getData();\r\n            },\r\n            reset() {\r\n                this.searchForm = {\r\n                    disable_status: '',\r\n                    advert_type: ''\r\n                }\r\n            },\r\n            del(id) {\r\n                this.$confirm('确认删除该广告位?')\r\n                    .then(() => {\r\n                        ad_del({id}).then(() => {\r\n                            this.getData();\r\n                        })\r\n                    })\r\n            },\r\n            openDialog(type, data) {\r\n                this.type = type;\r\n                this.dialogVisible = true;\r\n                if (type === 'add') {\r\n                    this.form = {\r\n                        advert_name: '',\r\n                        advert_type: '',\r\n                        link: '',\r\n                        imgList: {},\r\n                        note: '',\r\n                    }\r\n                } else {\r\n                    this.editId = data.id;\r\n                    this.form = {\r\n                        advert_name: data.advert_name,\r\n                        advert_type: data.advert_type + \"\",\r\n                        link: data.link,\r\n                        imgList: {\r\n                            path: data.img,\r\n                            url: data.imgList\r\n                        },\r\n                        note: data.note,\r\n                    }\r\n                }\r\n            },\r\n            submit() {\r\n                this.$refs['form'].validate(valid => {\r\n                    if (valid) {\r\n                        let params = {\r\n                            advert_name: this.form.advert_name,\r\n                            advert_type: this.form.advert_type,\r\n                            link: this.form.link,\r\n                            imgList: this.form.imgList.url,\r\n                            img: this.form.imgList.path,\r\n                            note: this.form.note,\r\n                        };\r\n                        if (this.type === 'add') {\r\n                            ad_add(params).then(() => {\r\n                                this.$message.success(\"添加成功\");\r\n                                this.dialogVisible = false;\r\n                                this.getData();\r\n                            })\r\n                        }\r\n                        if (this.type === 'edit') {\r\n                            params.id = this.editId;\r\n                            ad_edit(params).then(() => {\r\n                                this.$message.success(\"修改成功\");\r\n                                this.dialogVisible = false;\r\n                                this.getData();\r\n                            })\r\n                        }\r\n\r\n                    }\r\n                })\r\n            },\r\n            getData() {\r\n                let params = {\r\n                    disable_status: this.searchForm.audit_status,\r\n                    advert_type: this.searchForm.advert_type,\r\n                    page: this.pageNumber,\r\n                    pageSize: 10\r\n                };\r\n                ad_list(params).then(res => {\r\n                    this.tableData = res.list;\r\n                    this.total = res.data.count;\r\n                })\r\n            },\r\n            upload(e) {\r\n                this.form.imgList = e;\r\n            },\r\n            delImage() {\r\n                this.form.imgList = {}\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}