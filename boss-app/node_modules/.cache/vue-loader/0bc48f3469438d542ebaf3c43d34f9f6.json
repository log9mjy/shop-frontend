{"remainingRequest":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\shop-frontend\\boss-app\\src\\view\\goods\\category\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\shop-frontend\\boss-app\\src\\view\\goods\\category\\index.vue","mtime":1648482459382},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1632657941543},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1632657960293}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVXBsb2FkIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvdXBsb2FkIjsKaW1wb3J0IHtjYXRlZ29yeV9kZWwsIGNhdGVnb3J5X2VkaXQsIGNhdGVnb3J5X2xpc3QsIGNhdGVnb3J5X2FkZH0gZnJvbSAiLi4vLi4vLi4vYXBpL2dvb2RzX2NhdGVnb3J5IjsKaW1wb3J0IHtjYXRlZ29yeV9vcHRpb25zfSBmcm9tICIuLi8uLi8uLi9hcGkvZ29vZHMiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogImluZGV4IiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBVcGxvYWQKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgICAgICAgIHR5cGU6ICdhZGQnLAogICAgICAgICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJycsCiAgICAgICAgICAgICAgICBsb2dvOiB7fSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcnVsZXM6IHsKICAgICAgICAgICAgICAgIG5hbWU6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaUnfV0sCiAgICAgICAgICAgICAgICBsb2dvOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35LiK5LygJ31dLAogICAgICAgICAgICB9LAogICAgICAgICAgICBjYXRlZ29yeU9wdGlvbnM6IFtdLAogICAgICAgICAgICBzZWFyY2hGb3JtOiB7CiAgICAgICAgICAgICAgICBjYXRlZ29yeTogW10KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZWRpdElkOiAwLAogICAgICAgICAgICBwaWQ6IDAKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgICBjYXRlZ29yeV9vcHRpb25zKCkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLmNhdGVnb3J5T3B0aW9ucyA9IHJlcy5saXN0OwogICAgICAgIH0pCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGRlbChpZCkgewogICAgICAgICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTliKDpmaTor6XliIbnsbs/JykKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeV9kZWwoe2lkfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgb3BlbkRpYWxvZyh0eXBlLCBwaWQsIGRhdGEpIHsKICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTsKICAgICAgICAgICAgdGhpcy5waWQgPSBwaWQ7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIGlmICh0eXBlID09PSAnYWRkJykgewogICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgICAgIGxvZ286IHt9LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5lZGl0SWQgPSBkYXRhLmlkOwogICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSwKICAgICAgICAgICAgICAgICAgICBsb2dvOiB7dXJsOiBkYXRhLmxvZ299LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzdWJtaXQoKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnYWRkJykgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5mb3JtLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWQ6IHRoaXMucGlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nbzogdGhpcy5mb3JtLmxvZ28ucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlfYWRkKHBhcmFtcykudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua3u+WKoOaIkOWKnyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2VkaXQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmZvcm0ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLmVkaXRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ286IHRoaXMuZm9ybS5sb2dvLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5X2VkaXQocGFyYW1zKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGdldERhdGEoKSB7CiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnNlYXJjaEZvcm0ubmFtZSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRm9ybS5jYXRlZ29yeSAmJiB0aGlzLnNlYXJjaEZvcm0uY2F0ZWdvcnkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgcGFyYW1zLmNhdGVnb3J5X2lkID0gdGhpcy5zZWFyY2hGb3JtLmNhdGVnb3J5W3RoaXMuc2VhcmNoRm9ybS5jYXRlZ29yeS5sZW5ndGggLSAxXQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGVnb3J5X2xpc3QocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5saXN0OwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcmVzZXQoKSB7CiAgICAgICAgICAgIHRoaXMuc2VhcmNoRm9ybSA9IHsKICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgY2F0ZWdvcnk6IFtdCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNlYXJjaCgpIHsKICAgICAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICAgICAgfSwKICAgICAgICB1cGxvYWQoZSkgewogICAgICAgICAgICB0aGlzLmZvcm0ubG9nbyA9IGU7CiAgICAgICAgfSwKICAgICAgICBkZWxJbWFnZSgpIHsKICAgICAgICAgICAgdGhpcy5mb3JtLmxvZ28gPSB7fTsKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/goods/category","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"search-form\">\r\n            <el-form :inline=\"true\" size=\"small\">\r\n                <el-form-item label=\"分类\">\r\n                    <el-cascader v-model=\"searchForm.category\" :options=\"categoryOptions\" :props=\"{value:'id',label:'name', checkStrictly: true }\r\n                    \" clearable></el-cascader>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"search\">查询</el-button>\r\n                    <el-button icon=\"el-icon-refresh-left\" @click=\"reset\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n        <div class=\"table-view\">\r\n            <div class=\"add-view\">\r\n                <el-button icon=\"el-icon-plus\" type=\"primary\" plain @click=\"openDialog('add',0,{})\">新增</el-button>\r\n            </div>\r\n            <el-table :data=\"tableData\" style=\"width: 100%\" align=\"center\" row-key=\"id\"\r\n                      :tree-props=\"{children: 'children'}\">\r\n                <el-table-column prop=\"id\" label=\"编号\"></el-table-column>\r\n                <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n                <el-table-column label=\"logo\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-image class=\"table-image\" fit=\"cover\" :src=\"scope.row.logo\"\r\n                                  :preview-src-list=\"scope.row.logo |toArray\"></el-image>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" width=\"200px\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button size=\"mini\" type=\"text\" @click=\"openDialog('add',scope.row.id,scope.row)\">\r\n                            新增\r\n                        </el-button>\r\n                        <el-button size=\"mini\" type=\"text\" @click=\"openDialog('edit',0,scope.row)\">\r\n                            编辑\r\n                        </el-button>\r\n                        <el-button size=\"mini\" type=\"text\" @click=\"del(scope.row.id)\">删除\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </div>\r\n\r\n        <el-dialog :title=\"type==='add'?'添加分类':'编辑分类'\" :visible.sync=\"dialogVisible\" width=\"400px\">\r\n            <el-form ref=\"form\" size=\"small\" :model=\"form\" label-width=\"60px\" :rules=\"rules\">\r\n                <el-form-item label=\"标题\" prop=\"name\">\r\n                    <el-input v-model=\"form.name\" placeholder=\"标题\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"logo\" prop=\"logo\">\r\n                    <upload :file-list=\"form.logo.url |toArray\" @success=\"upload\" @del=\"delImage\"/>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\r\n                <el-button size=\"small\" type=\"primary\" @click=\"submit\">确 定</el-button>\r\n       </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import Upload from \"../../../components/upload\";\r\n    import {category_del, category_edit, category_list, category_add} from \"../../../api/goods_category\";\r\n    import {category_options} from \"../../../api/goods\";\r\n\r\n    export default {\r\n        name: \"index\",\r\n        components: {\r\n            Upload\r\n        },\r\n        data() {\r\n            return {\r\n                tableData: [],\r\n                type: 'add',\r\n                dialogVisible: false,\r\n                form: {\r\n                    name: '',\r\n                    category: '',\r\n                    logo: {},\r\n                },\r\n                rules: {\r\n                    name: [{required: true, message: '请输入'}],\r\n                    logo: [{required: true, message: '请上传'}],\r\n                },\r\n                categoryOptions: [],\r\n                searchForm: {\r\n                    category: []\r\n                },\r\n                editId: 0,\r\n                pid: 0\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getData();\r\n            category_options().then(res => {\r\n                this.categoryOptions = res.list;\r\n            })\r\n        },\r\n        methods: {\r\n            del(id) {\r\n                this.$confirm('确认删除该分类?')\r\n                    .then(() => {\r\n                        category_del({id}).then(() => {\r\n                            this.getData();\r\n                        })\r\n                    })\r\n            },\r\n            openDialog(type, pid, data) {\r\n                this.type = type;\r\n                this.pid = pid;\r\n                this.dialogVisible = true;\r\n                if (type === 'add') {\r\n                    this.form = {\r\n                        name: '',\r\n                        logo: {},\r\n                    }\r\n                } else {\r\n                    this.editId = data.id;\r\n                    this.form = {\r\n                        name: data.name,\r\n                        logo: {url: data.logo},\r\n                    }\r\n                }\r\n            },\r\n            submit() {\r\n                this.$refs['form'].validate(valid => {\r\n                    if (valid) {\r\n                        if (this.type === 'add') {\r\n                            let params = {\r\n                                name: this.form.name,\r\n                                pid: this.pid,\r\n                                logo: this.form.logo.path,\r\n                            };\r\n                            category_add(params).then(() => {\r\n                                this.$message.success(\"添加成功\");\r\n                                this.dialogVisible = false;\r\n                                this.getData();\r\n                            })\r\n                        }\r\n                        if (this.type === 'edit') {\r\n                            let params = {\r\n                                name: this.form.name,\r\n                                id: this.editId,\r\n                                logo: this.form.logo.path,\r\n                            };\r\n                            category_edit(params).then(() => {\r\n                                this.$message.success(\"修改成功\");\r\n                                this.dialogVisible = false;\r\n                                this.getData();\r\n                            })\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            getData() {\r\n                let params = {\r\n                    name: this.searchForm.name,\r\n                };\r\n                if (this.searchForm.category && this.searchForm.category.length > 0) {\r\n                    params.category_id = this.searchForm.category[this.searchForm.category.length - 1]\r\n                }\r\n                category_list(params).then(res => {\r\n                    this.tableData = res.list;\r\n                })\r\n            },\r\n            reset() {\r\n                this.searchForm = {\r\n                    name: '',\r\n                    category: []\r\n                }\r\n            },\r\n            search() {\r\n                this.getData();\r\n            },\r\n            upload(e) {\r\n                this.form.logo = e;\r\n            },\r\n            delImage() {\r\n                this.form.logo = {};\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}