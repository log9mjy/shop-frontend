{"remainingRequest":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\shop-frontend\\boss-app\\src\\view\\goods\\list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\shop-frontend\\boss-app\\src\\view\\goods\\list\\index.vue","mtime":1648649306722},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1632657941543},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1632657960293}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z29vZHNfcGFnZSwgYnJhbmRfb3B0aW9ucywgY2F0ZWdvcnlfb3B0aW9ucywgZ29vZHNfZGVsfSBmcm9tICIuLi8uLi8uLi9hcGkvZ29vZHMiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogImluZGV4IiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgICAgICAgdG90YWw6IDAsCiAgICAgICAgICAgIHBhZ2VOdW1iZXI6IDEsCiAgICAgICAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgYnJhbmRfaWQ6ICcnLAogICAgICAgICAgICAgICAgYXVkaXRfc3RhdHVzOiAnJywKICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBbXQogICAgICAgICAgICB9LAogICAgICAgICAgICBicmFuZE9wdGlvbnM6IFtdLAogICAgICAgICAgICBjYXRlZ29yeU9wdGlvbnM6IFtdLAogICAgICAgICAgICBhdWRpdE9wdGlvbnM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAiY29kZSI6ICIxIiwKCiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAi5a6h5qC46YCa6L+HIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAiY29kZSI6ICIyIiwKCiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAi5b6F5a6h5qC4IgoKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgImNvZGUiOiAiMyIsCgogICAgICAgICAgICAgICAgICAgICJuYW1lIjogIuW3sumps+WbniIKCiAgICAgICAgICAgICAgICB9XQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgIGJyYW5kX29wdGlvbnMoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuYnJhbmRPcHRpb25zID0gcmVzLmxpc3Q7CiAgICAgICAgfSk7CiAgICAgICAgY2F0ZWdvcnlfb3B0aW9ucygpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy5jYXRlZ29yeU9wdGlvbnMgPSByZXMubGlzdDsKICAgICAgICB9KQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBkZWwoaWQpIHsKICAgICAgICAgICAgdGhpcy4kY29uZmlybSgn56Gu6K6k5Yig6Zmk6K+l5ZWG5ZOBPycpCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZ29vZHNfZGVsKHtpZH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGdldERhdGEoKSB7CiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2VOdW1iZXIsCiAgICAgICAgICAgICAgICBicmFuZF9pZDogdGhpcy5zZWFyY2hGb3JtLmJyYW5kX2lkLAogICAgICAgICAgICAgICAgbmFtZTogdGhpcy5zZWFyY2hGb3JtLm5hbWUsCiAgICAgICAgICAgICAgICBhdWRpdF9zdGF0dXM6IHRoaXMuc2VhcmNoRm9ybS5hdWRpdF9zdGF0dXMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRm9ybS5jYXRlZ29yeSAmJiB0aGlzLnNlYXJjaEZvcm0uY2F0ZWdvcnkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgcGFyYW1zLmNhdGVnb3J5X2lkID0gdGhpcy5zZWFyY2hGb3JtLmNhdGVnb3J5W3RoaXMuc2VhcmNoRm9ybS5jYXRlZ29yeS5sZW5ndGggLSAxXQogICAgICAgICAgICB9CiAgICAgICAgICAgIGdvb2RzX3BhZ2UocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5saXN0OwogICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmNvdW50OwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcmVzZXQoKSB7CiAgICAgICAgICAgIHRoaXMuc2VhcmNoRm9ybSA9IHsKICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgYXVkaXRfc3RhdHVzOiAnJywKICAgICAgICAgICAgICAgIGJyYW5kX2lkOiAnJywKICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBbXQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzZWFyY2goKSB7CiAgICAgICAgICAgIHRoaXMucGFnZU51bWJlciA9IDE7CiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgIH0sCiAgICAgICAgY3VycmVudENoYW5nZShlKSB7CiAgICAgICAgICAgIHRoaXMucGFnZU51bWJlciA9IGU7CiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgIH0sCiAgICAgICAgbGlua0FkZCgpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgcGF0aDogIi9nb29kcy9hZGQiCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBsaW5rRWRpdChpZCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBwYXRoOiAiL2dvb2RzL2VkaXQiLAogICAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgICAgICBpZDogaWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/goods/list","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"search-form\">\r\n            <el-form :inline=\"true\" size=\"small\">\r\n                <el-form-item label=\"商品名称\">\r\n                    <el-input v-model=\"searchForm.name\" placeholder=\"商品名称\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"品牌\">\r\n                    <el-select v-model=\"searchForm.brand_id\" style=\"width: 100px\" clearable>\r\n                        <el-option v-for=\"item in brandOptions\" :key=\"item.id\" :label=\"item.name\"\r\n                                   :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"分类\">\r\n                    <el-cascader v-model=\"searchForm.category\" :options=\"categoryOptions\" :props=\"{value:'id',label:'name' }\r\n                    \" clearable></el-cascader>\r\n                </el-form-item>\r\n                <el-form-item label=\"状态\">\r\n                    <el-select v-model=\"searchForm.audit_status\" style=\"width: 100px\" clearable>\r\n                        <el-option v-for=\"item in auditOptions\" :key=\"item.code\" :label=\"item.name\" :value=\"item.code\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"search\">查询</el-button>\r\n                    <el-button icon=\"el-icon-refresh-left\" @click=\"reset\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n        <div class=\"table-view\">\r\n            <div class=\"add-view\">\r\n                <el-button icon=\"el-icon-plus\" type=\"primary\" plain @click=\"linkAdd\">新增</el-button>\r\n            </div>\r\n            <el-table :data=\"tableData\" style=\"width: 100%\" align=\"center\">\r\n                <el-table-column prop=\"id\" label=\"商品编号\"></el-table-column>\r\n                <el-table-column prop=\"shop_name\" label=\"店铺\"></el-table-column>\r\n                <el-table-column prop=\"name\" label=\"商品名称\" show-overflow-tooltip></el-table-column>\r\n                <el-table-column label=\"商品图\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-image class=\"table-image\" :src=\"scope.row.thumbnail\"\r\n                                  :preview-src-list=\"scope.row.thumbnail |toArray\"/>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n                <el-table-column prop=\"brand_name\" label=\"品牌\"></el-table-column>\r\n                <el-table-column prop=\"created_at\" label=\"创建日期\"></el-table-column>\r\n                <el-table-column label=\"状态\" prop=\"audit_name\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"200px\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-edit\" @click=\"linkEdit(scope.row.id)\">\r\n                            编辑\r\n                        </el-button>\r\n                        <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" @click=\"del(scope.row.id)\">删除\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </div>\r\n        <el-pagination class=\"page\" background layout=\"total,prev, pager, next\" :total=\"total\"\r\n                       @current-change=\"currentChange\"></el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {goods_page, brand_options, category_options, goods_del} from \"../../../api/goods\";\r\n\r\n    export default {\r\n        name: \"index\",\r\n        data() {\r\n            return {\r\n                tableData: [],\r\n                total: 0,\r\n                pageNumber: 1,\r\n                searchForm: {\r\n                    name: '',\r\n                    brand_id: '',\r\n                    audit_status: '',\r\n                    category: []\r\n                },\r\n                brandOptions: [],\r\n                categoryOptions: [],\r\n                auditOptions: [\r\n                    {\r\n                        \"code\": \"1\",\r\n\r\n                        \"name\": \"审核通过\"\r\n                    },\r\n                    {\r\n                        \"code\": \"2\",\r\n\r\n                        \"name\": \"待审核\"\r\n\r\n                    },\r\n                    {\r\n                        \"code\": \"3\",\r\n\r\n                        \"name\": \"已驳回\"\r\n\r\n                    }]\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getData();\r\n            brand_options().then(res => {\r\n                this.brandOptions = res.list;\r\n            });\r\n            category_options().then(res => {\r\n                this.categoryOptions = res.list;\r\n            })\r\n        },\r\n        methods: {\r\n            del(id) {\r\n                this.$confirm('确认删除该商品?')\r\n                    .then(() => {\r\n                        goods_del({id}).then(() => {\r\n                            this.getData();\r\n                        })\r\n                    })\r\n            },\r\n            getData() {\r\n                let params = {\r\n                    page: this.pageNumber,\r\n                    brand_id: this.searchForm.brand_id,\r\n                    name: this.searchForm.name,\r\n                    audit_status: this.searchForm.audit_status\r\n                };\r\n                if (this.searchForm.category && this.searchForm.category.length > 0) {\r\n                    params.category_id = this.searchForm.category[this.searchForm.category.length - 1]\r\n                }\r\n                goods_page(params).then(res => {\r\n                    this.tableData = res.list;\r\n                    this.total = res.data.count;\r\n                })\r\n            },\r\n            reset() {\r\n                this.searchForm = {\r\n                    name: '',\r\n                    audit_status: '',\r\n                    brand_id: '',\r\n                    category: []\r\n                }\r\n            },\r\n            search() {\r\n                this.pageNumber = 1;\r\n                this.getData();\r\n            },\r\n            currentChange(e) {\r\n                this.pageNumber = e;\r\n                this.getData();\r\n            },\r\n            linkAdd() {\r\n                this.$router.push({\r\n                    path: \"/goods/add\"\r\n                })\r\n            },\r\n            linkEdit(id) {\r\n                this.$router.push({\r\n                    path: \"/goods/edit\",\r\n                    query: {\r\n                        id: id\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}