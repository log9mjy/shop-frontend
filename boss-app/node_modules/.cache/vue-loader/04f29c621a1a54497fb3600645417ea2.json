{"remainingRequest":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\shop-frontend\\boss-app\\src\\view\\goods\\brand\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\shop-frontend\\boss-app\\src\\view\\goods\\brand\\index.vue","mtime":1648482459382},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1632657941543},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1632657960293}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVXBsb2FkIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvdXBsb2FkIjsKaW1wb3J0IHticmFuZF9hZGQsIGJyYW5kX2RlbCwgYnJhbmRfZWRpdCwgYnJhbmRfbGlzdH0gZnJvbSAiLi4vLi4vLi4vYXBpL2dvb2RzX2JyYW5kIjsKaW1wb3J0IHtjYXRlZ29yeV9vcHRpb25zfSBmcm9tICIuLi8uLi8uLi9hcGkvZ29vZHMiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogImluZGV4IiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBVcGxvYWQKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgICAgICAgIHR5cGU6ICdhZGQnLAogICAgICAgICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJycsCiAgICAgICAgICAgICAgICBicmFuZF9kZXNjcmliZTogJycsCiAgICAgICAgICAgICAgICBicmFuZF9zdG9yeTogJycsCiAgICAgICAgICAgICAgICBsb2dvOiB7fSwKICAgICAgICAgICAgICAgIG9mZmljZV93ZWI6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgICAgICBuYW1lOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWlJ31dLAogICAgICAgICAgICAgICAgY2F0ZWdvcnk6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6knfV0sCiAgICAgICAgICAgICAgICBsb2dvOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35LiK5LygJ31dLAogICAgICAgICAgICB9LAogICAgICAgICAgICBjYXRlZ29yeU9wdGlvbnM6IFtdLAogICAgICAgICAgICBzZWFyY2hGb3JtOiB7CiAgICAgICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBbXQogICAgICAgICAgICB9LAogICAgICAgICAgICBlZGl0SWQ6IDAKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgICBjYXRlZ29yeV9vcHRpb25zKCkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLmNhdGVnb3J5T3B0aW9ucyA9IHJlcy5saXN0OwogICAgICAgIH0pCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGRlbChpZCkgewogICAgICAgICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTliKDpmaTor6Xlk4HniYw/JykKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBicmFuZF9kZWwoe2lkfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgb3BlbkRpYWxvZyh0eXBlLCBkYXRhKSB7CiAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIGlmICh0eXBlID09PSAnYWRkJykgewogICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnJywKICAgICAgICAgICAgICAgICAgICBicmFuZF9kZXNjcmliZTogJycsCiAgICAgICAgICAgICAgICAgICAgYnJhbmRfc3Rvcnk6ICcnLAogICAgICAgICAgICAgICAgICAgIGxvZ286IHt9LAogICAgICAgICAgICAgICAgICAgIG9mZmljZV93ZWI6ICcnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmVkaXRJZCA9IGRhdGEuaWQ7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBbZGF0YS5jYXRlZ29yeV9pZF0sCiAgICAgICAgICAgICAgICAgICAgYnJhbmRfZGVzY3JpYmU6IGRhdGEuYnJhbmRfZGVzY3JpYmUsCiAgICAgICAgICAgICAgICAgICAgYnJhbmRfc3Rvcnk6IGRhdGEuYnJhbmRfc3RvcnksCiAgICAgICAgICAgICAgICAgICAgbG9nbzoge3VybDogZGF0YS5sb2dvVXJsLCBwYXRoOiBkYXRhLmxvZ299LAogICAgICAgICAgICAgICAgICAgIG9mZmljZV93ZWI6IGRhdGEub2ZmaWNlX3dlYgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzdWJtaXQoKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmZvcm0ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmRfZGVzY3JpYmU6IHRoaXMuZm9ybS5icmFuZF9kZXNjcmliZSwKICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmRfc3Rvcnk6IHRoaXMuZm9ybS5icmFuZF9zdG9yeSwKICAgICAgICAgICAgICAgICAgICAgICAgbG9nbzogdGhpcy5mb3JtLmxvZ28ucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgb2ZmaWNlX3dlYjogdGhpcy5mb3JtLm9mZmljZV93ZWIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcm0uY2F0ZWdvcnkgJiYgdGhpcy5mb3JtLmNhdGVnb3J5Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmNhdGVnb3J5X2lkID0gdGhpcy5mb3JtLmNhdGVnb3J5W3RoaXMuZm9ybS5jYXRlZ29yeS5sZW5ndGggLSAxXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnYWRkJykgewogICAgICAgICAgICAgICAgICAgICAgICBicmFuZF9hZGQocGFyYW1zKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5re75Yqg5oiQ5YqfIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnZWRpdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmlkID0gdGhpcy5lZGl0SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyYW5kX2VkaXQocGFyYW1zKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBnZXREYXRhKCkgewogICAgICAgICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgICAgICAgbmFtZTogdGhpcy5zZWFyY2hGb3JtLm5hbWUsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaEZvcm0uY2F0ZWdvcnkgJiYgdGhpcy5zZWFyY2hGb3JtLmNhdGVnb3J5Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHBhcmFtcy5jYXRlZ29yeV9pZCA9IHRoaXMuc2VhcmNoRm9ybS5jYXRlZ29yeVt0aGlzLnNlYXJjaEZvcm0uY2F0ZWdvcnkubGVuZ3RoIC0gMV0KICAgICAgICAgICAgfQogICAgICAgICAgICBicmFuZF9saXN0KHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMubGlzdDsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHJlc2V0KCkgewogICAgICAgICAgICB0aGlzLnNlYXJjaEZvcm0gPSB7CiAgICAgICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBbXQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzZWFyY2goKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgIH0sCiAgICAgICAgdXBsb2FkKGUpIHsKICAgICAgICAgICAgdGhpcy5mb3JtLmxvZ28gPSBlOwogICAgICAgIH0sCiAgICAgICAgZGVsSW1hZ2UoKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybS5sb2dvID0ge307CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/goods/brand","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"search-form\">\r\n            <el-form :inline=\"true\" size=\"small\">\r\n                <el-form-item label=\"品牌名称\">\r\n                    <el-input v-model=\"searchForm.name\" placeholder=\"品牌名称\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"分类\">\r\n                    <el-cascader v-model=\"searchForm.category\" :options=\"categoryOptions\" :props=\"{value:'id',label:'name', checkStrictly: true }\r\n                    \" clearable></el-cascader>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"search\">查询</el-button>\r\n                    <el-button icon=\"el-icon-refresh-left\" @click=\"reset\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n        <div class=\"table-view\">\r\n            <div class=\"add-view\">\r\n                <el-button icon=\"el-icon-plus\" type=\"primary\" plain @click=\"openDialog('add')\">新增</el-button>\r\n            </div>\r\n            <el-table :data=\"tableData\" style=\"width: 100%\" align=\"center\">\r\n                <el-table-column prop=\"id\" label=\"编号\"></el-table-column>\r\n                <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n                <el-table-column label=\"logo\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-image class=\"table-image\" fit=\"cover\" :src=\"scope.row.logoUrl\"\r\n                                  :preview-src-list=\"scope.row.logoUrl |toArray\"></el-image>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"categoryName\" label=\"分类\"></el-table-column>\r\n                <el-table-column prop=\"created_at\" label=\"创建时间\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"200px\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-edit\" @click=\"openDialog('edit',scope.row)\">\r\n                            编辑\r\n                        </el-button>\r\n                        <el-button :disabled=\"scope.row.isDefault\" size=\"mini\" type=\"danger\" icon=\"el-icon-delete\"\r\n                                   @click=\"del(scope.row.id)\">删除\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </div>\r\n\r\n        <el-dialog :title=\"type==='add'?'添加品牌':'编辑品牌'\" :visible.sync=\"dialogVisible\" width=\"400px\">\r\n            <el-form ref=\"form\" size=\"small\" :model=\"form\" label-width=\"60px\" :rules=\"rules\">\r\n                <el-form-item label=\"标题\" prop=\"name\">\r\n                    <el-input v-model=\"form.name\" placeholder=\"标题\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"分类\" prop=\"category\" v-if=\"type==='add'\">\r\n                    <el-cascader v-model=\"form.category\" :options=\"categoryOptions\" :props=\"{value:'id',label:'name', checkStrictly: true }\r\n                    \" clearable></el-cascader>\r\n                </el-form-item>\r\n                <el-form-item label=\"logo\" prop=\"logo\">\r\n                    <upload :file-list=\"form.logo.url |toArray\" @success=\"upload\" @del=\"delImage\"/>\r\n                </el-form-item>\r\n                <el-form-item label=\"官网\">\r\n                    <el-input v-model=\"form.office_web\" placeholder=\"官网链接\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"描述\">\r\n                    <el-input type=\"textarea\" v-model=\"form.brand_describe\" placeholder=\"品牌描述\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"故事\">\r\n                    <el-input type=\"textarea\" v-model=\"form.brand_story\" placeholder=\"品牌故事\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\r\n                <el-button size=\"small\" type=\"primary\" @click=\"submit\">确 定</el-button>\r\n       </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import Upload from \"../../../components/upload\";\r\n    import {brand_add, brand_del, brand_edit, brand_list} from \"../../../api/goods_brand\";\r\n    import {category_options} from \"../../../api/goods\";\r\n\r\n    export default {\r\n        name: \"index\",\r\n        components: {\r\n            Upload\r\n        },\r\n        data() {\r\n            return {\r\n                tableData: [],\r\n                type: 'add',\r\n                dialogVisible: false,\r\n                form: {\r\n                    name: '',\r\n                    category: '',\r\n                    brand_describe: '',\r\n                    brand_story: '',\r\n                    logo: {},\r\n                    office_web: ''\r\n                },\r\n                rules: {\r\n                    name: [{required: true, message: '请输入'}],\r\n                    category: [{required: true, message: '请选择'}],\r\n                    logo: [{required: true, message: '请上传'}],\r\n                },\r\n                categoryOptions: [],\r\n                searchForm: {\r\n                    name: '',\r\n                    category: []\r\n                },\r\n                editId: 0\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getData();\r\n            category_options().then(res => {\r\n                this.categoryOptions = res.list;\r\n            })\r\n        },\r\n        methods: {\r\n            del(id) {\r\n                this.$confirm('确认删除该品牌?')\r\n                    .then(() => {\r\n                        brand_del({id}).then(() => {\r\n                            this.getData();\r\n                        })\r\n                    })\r\n            },\r\n            openDialog(type, data) {\r\n                this.type = type;\r\n                this.dialogVisible = true;\r\n                if (type === 'add') {\r\n                    this.form = {\r\n                        name: '',\r\n                        category: '',\r\n                        brand_describe: '',\r\n                        brand_story: '',\r\n                        logo: {},\r\n                        office_web: ''\r\n                    }\r\n                } else {\r\n                    this.editId = data.id;\r\n                    this.form = {\r\n                        name: data.name,\r\n                        category: [data.category_id],\r\n                        brand_describe: data.brand_describe,\r\n                        brand_story: data.brand_story,\r\n                        logo: {url: data.logoUrl, path: data.logo},\r\n                        office_web: data.office_web\r\n                    }\r\n                }\r\n            },\r\n            submit() {\r\n                this.$refs['form'].validate(valid => {\r\n                    if (valid) {\r\n                        let params = {\r\n                            name: this.form.name,\r\n                            brand_describe: this.form.brand_describe,\r\n                            brand_story: this.form.brand_story,\r\n                            logo: this.form.logo.path,\r\n                            office_web: this.form.office_web\r\n                        };\r\n                        if (this.form.category && this.form.category.length > 0) {\r\n                            params.category_id = this.form.category[this.form.category.length - 1]\r\n                        }\r\n                        if (this.type === 'add') {\r\n                            brand_add(params).then(() => {\r\n                                this.$message.success(\"添加成功\");\r\n                                this.dialogVisible = false;\r\n                                this.getData();\r\n                            })\r\n                        }\r\n                        if (this.type === 'edit') {\r\n                            params.id = this.editId;\r\n                            brand_edit(params).then(() => {\r\n                                this.$message.success(\"修改成功\");\r\n                                this.dialogVisible = false;\r\n                                this.getData();\r\n                            })\r\n                        }\r\n\r\n                    }\r\n                })\r\n            },\r\n            getData() {\r\n                let params = {\r\n                    name: this.searchForm.name,\r\n                };\r\n                if (this.searchForm.category && this.searchForm.category.length > 0) {\r\n                    params.category_id = this.searchForm.category[this.searchForm.category.length - 1]\r\n                }\r\n                brand_list(params).then(res => {\r\n                    this.tableData = res.list;\r\n                })\r\n            },\r\n            reset() {\r\n                this.searchForm = {\r\n                    name: '',\r\n                    category: []\r\n                }\r\n            },\r\n            search() {\r\n                this.getData();\r\n            },\r\n            upload(e) {\r\n                this.form.logo = e;\r\n            },\r\n            delImage() {\r\n                this.form.logo = {};\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}