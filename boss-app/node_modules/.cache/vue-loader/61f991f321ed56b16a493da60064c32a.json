{"remainingRequest":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\shop-frontend\\boss-app\\src\\view\\goods\\add\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\shop-frontend\\boss-app\\src\\view\\goods\\add\\index.vue","mtime":1648649105246},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1632657941543},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1632657960293}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNaW5pVXBsb2FkIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvdXBsb2FkLW1pbmkiOwppbXBvcnQgVXBsb2FkIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvdXBsb2FkIjsKaW1wb3J0IHticmFuZF9vcHRpb25zLCBnb29kc19hZGR9IGZyb20gIi4uLy4uLy4uL2FwaS9nb29kcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiaW5kZXgiLAogICAgY29tcG9uZW50czogewogICAgICAgIFVwbG9hZCwKICAgICAgICBNaW5pVXBsb2FkCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzdGVwOiAxLAogICAgICAgICAgICBvcHRpb25zOiBbXSwKICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICAgICAgICBwcm9qZWN0X2Rlc2NyaWJlOiAiIiwKICAgICAgICAgICAgICAgIGJyYW5kX2lkOiAiIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcnVsZXM6IHsKICAgICAgICAgICAgICAgIG5hbWU6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaUnfV0sCiAgICAgICAgICAgICAgICBwcm9qZWN0X2Rlc2NyaWJlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWlJ31dLAogICAgICAgICAgICAgICAgYnJhbmRfaWQ6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6knfV0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFsYnVtczogW10sCiAgICAgICAgICAgIGRldGFpbHM6IFtdLAogICAgICAgICAgICBzcGVjaWZpY2F0aW9uczogW10sCiAgICAgICAgICAgIHNrdXM6IFtdCiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgYnJhbmRfb3B0aW9ucygpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gcmVzLmxpc3Q7CiAgICAgICAgfSk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGJhY2soKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIHBhdGg6ICIvZ29vZHMvbGlzdCIKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHNhdmUoKSB7CiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBicmFuZF9pZDogdGhpcy5mb3JtLmJyYW5kX2lkICsgIiIsCiAgICAgICAgICAgICAgICBwcm9qZWN0X2Rlc2NyaWJlOiB0aGlzLmZvcm0ucHJvamVjdF9kZXNjcmliZSwKICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuZm9ybS5uYW1lLAogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAodGhpcy5hbGJ1bXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fkuIrkvKDllYblk4Hlm77niYciKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgYXJyID0gdGhpcy5hbGJ1bXMubWFwKGkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBpc19kZWZhdWx0OiAiMCIsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBpLnBhdGgKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGFyclswXS5pc19kZWZhdWx0ID0gIjEiOwogICAgICAgICAgICBwYXJhbXMuc2hvcF9pbWFnZSA9IGFycjsKICAgICAgICAgICAgcGFyYW1zLmRldGFpbHMgPSB0aGlzLmRldGFpbHMubWFwKGkgPT4gaS5wYXRoKTsKICAgICAgICAgICAgbGV0IGF0dHJpYnV0ZV9rZXkgPSB7fTsKICAgICAgICAgICAgdGhpcy5zcGVjaWZpY2F0aW9ucy5tYXAoaSA9PiB7CiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVfa2V5W2kudGl0bGVdID0gaS52YWx1ZXMubWFwKGogPT4gai52YWx1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBwYXJhbXMuYXR0cmlidXRlX2tleSA9IGF0dHJpYnV0ZV9rZXk7CiAgICAgICAgICAgIHBhcmFtcy5wcm9qZWN0X3NwZWNzID0gdGhpcy5za3VzLm1hcChpID0+IHsKICAgICAgICAgICAgICAgIGxldCBzcGVjcyA9IGkuc3BlY2lmaWNhdGlvbnMubWFwKGogPT4gewogICAgICAgICAgICAgICAgICAgIGxldCByID0ge307CiAgICAgICAgICAgICAgICAgICAgcltqLmtleV0gPSBqLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHNwZWNzX3NlcTogaS5zcGVjc19zZXEsCiAgICAgICAgICAgICAgICAgICAgcHJvamVjdF9zdG9jazogaS5wcm9qZWN0X3N0b2NrLAogICAgICAgICAgICAgICAgICAgIHByb2plY3RfcHJpY2U6IGkucHJvamVjdF9wcmljZSwKICAgICAgICAgICAgICAgICAgICBwcm9qZWN0X3NwZWNzOiBzcGVjcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZ29vZHNfYWRkKHBhcmFtcykudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWVhuWTgeaWsOWinuaIkOWKnyIpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgdXBsb2FkU3BlY1BpYyhlLCBpMSwgaTIpIHsKICAgICAgICAgICAgdGhpcy5zcGVjaWZpY2F0aW9uc1tpMV0udmFsdWVzW2kyXS5hbGJ1bXMucHVzaChlKTsKICAgICAgICB9LAogICAgICAgIGRlbFNwZWNQaWMoZSwgaTEsIGkyKSB7CiAgICAgICAgICAgIHRoaXMuc3BlY2lmaWNhdGlvbnNbaTFdLnZhbHVlc1tpMl0uYWxidW1zLnNwbGljZShlLCAxKTsKICAgICAgICB9LAogICAgICAgIGNoYW5nZVN0ZXAoZSkgewogICAgICAgICAgICBpZiAoZSA9PT0gMiAmJiB0aGlzLnN0ZXAgPT09IDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnNbJ2Jhc2UtaW5mbyddLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwID0gMjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5zdGVwID0gZTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdXBsb2FkQWxidW0oZSkgewogICAgICAgICAgICB0aGlzLmFsYnVtcy5wdXNoKGUpCiAgICAgICAgfSwKICAgICAgICBkZWxBbGJ1bShlKSB7CiAgICAgICAgICAgIHRoaXMuYWxidW1zLnNwbGljZShlLCAxKQogICAgICAgIH0sCiAgICAgICAgdXBsb2FkRGV0YWlsKGUpIHsKICAgICAgICAgICAgdGhpcy5kZXRhaWxzLnB1c2goZSkKICAgICAgICB9LAogICAgICAgIGRlbERldGFpbChlKSB7CiAgICAgICAgICAgIHRoaXMuZGV0YWlscy5zcGxpY2UoZSwgMSkKICAgICAgICB9LAogICAgICAgIGFkZEF0dHJpYnV0ZSgpIHsKICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnB1c2goe2tleTogIiIsIHZhbHVlOiAiIn0pCiAgICAgICAgfSwKICAgICAgICBkZWxBdHRyaWJ1dGUoZSkgewogICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuc3BsaWNlKGUsIDEpCiAgICAgICAgfSwKICAgICAgICBkZWxTcGVjaWZpY2F0aW9uKGkpIHsKICAgICAgICAgICAgdGhpcy5zcGVjaWZpY2F0aW9ucy5zcGxpY2UoaSkKICAgICAgICB9LAogICAgICAgIGFkZFNwZWNpZmljYXRpb24oKSB7CiAgICAgICAgICAgIHRoaXMuc3BlY2lmaWNhdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhZGRTcGVjaWZpY2F0aW9uVmFsdWUoaSkgewogICAgICAgICAgICB0aGlzLnNwZWNpZmljYXRpb25zW2ldLnZhbHVlcy5wdXNoKHt2YWx1ZTogIiJ9KQogICAgICAgIH0sCiAgICAgICAgZGVsU3BlY2lmaWNhdGlvblZhbHVlKGksIGkyKSB7CiAgICAgICAgICAgIHRoaXMuc3BlY2lmaWNhdGlvbnNbaV0udmFsdWVzLnNwbGljZShpMiwgMSkKICAgICAgICB9LAogICAgICAgIHJlZnJlc2hTa3UoKSB7CiAgICAgICAgICAgIHRoaXMuc2t1cyA9IFtdOwogICAgICAgICAgICB0aGlzLmNvbWJpbmF0aW9uU2t1KHRoaXMuc2t1cywgdGhpcy5zcGVjaWZpY2F0aW9ucywgW10sIDApOwogICAgICAgIH0sCiAgICAgICAgY29tYmluYXRpb25Ta3Uoc2t1cywgc3BlY2lmaWNhdGlvbnMsIHRlbXAsIGluZGV4KSB7CiAgICAgICAgICAgIGlmIChzcGVjaWZpY2F0aW9ucy5sZW5ndGggPT09IGluZGV4KSB7CiAgICAgICAgICAgICAgICBsZXQgYXJyID0gW107CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh7a2V5OiBzcGVjaWZpY2F0aW9uc1tpXS50aXRsZSwgdmFsdWU6IHRlbXBbaV0udmFsdWV9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNrdXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWNhdGlvbnM6IGFyciwKICAgICAgICAgICAgICAgICAgICBwcm9qZWN0X3N0b2NrOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgcHJvamVjdF9wcmljZTogIjAiLAogICAgICAgICAgICAgICAgICAgIHNwZWNzX3NlcTogIjAiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwZWNpZmljYXRpb25zW2luZGV4XS52YWx1ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRlbXBbaW5kZXhdID0gc3BlY2lmaWNhdGlvbnNbaW5kZXhdLnZhbHVlc1tpXTsKICAgICAgICAgICAgICAgIHRoaXMuY29tYmluYXRpb25Ta3Uoc2t1cywgc3BlY2lmaWNhdGlvbnMsIHRlbXAsIGluZGV4ICsgMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"index.vue","sourceRoot":"src/view/goods/add","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"layout-card\">\r\n            <div class=\"layout-head\">\r\n                <div>\r\n                    <span :class=\"[step>0?'layout-active-title':'']\">1.编辑基本信息</span>\r\n                    <span :class=\"[step===1?'layout-active-label':'']\"></span>\r\n                </div>\r\n                <div>\r\n                    <span :class=\"[step>1?'layout-active-title':'']\">2.编辑商品详情</span>\r\n                    <span :class=\"[step===2?'layout-active-label':'']\"></span>\r\n                </div>\r\n                <div>\r\n                    <span :class=\"[step>2?'layout-active-title':'']\">3.编辑商品规格</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"layout-container\">\r\n                <div v-if=\"step===1\">\r\n                    <div class=\"layout-title\">基本信息</div>\r\n                    <div class=\"layout-content\">\r\n                        <el-form size=\"small\" ref=\"base-info\" label-width=\"100px\" :model=\"form\" :rules=\"rules\">\r\n                            <el-form-item label=\"商品名称\" prop=\"name\">\r\n                                <el-input v-model=\"form.name\" placeholder=\"输入商品名称\" style=\"width: 400px\" type=\"textarea\"\r\n                                          :maxlength=\"100\" show-word-limit></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"商品说明\" prop=\"project_describe\">\r\n                                <el-input v-model=\"form.project_describe\" placeholder=\"输入商品说明\" style=\"width: 300px\"\r\n                                          type=\"textarea\" :maxlength=\"100\" show-word-limit></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"商品品牌\" prop=\"brand_id\">\r\n                                <el-select v-model=\"form.brand_id\" style=\"width: 100px\" clearable>\r\n                                    <el-option v-for=\"item in options\" :key=\"item.id\" :label=\"item.name\"\r\n                                               :value=\"item.id\">\r\n                                    </el-option>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                        </el-form>\r\n                    </div>\r\n                    <div class=\"layout-title\">商品图片</div>\r\n                    <div class=\"layout-content\">\r\n                        <upload :limit=\"5\" :file-list=\"albums.map(i=>i.url)\" @success=\"uploadAlbum\"\r\n                                @del=\"delAlbum\"></upload>\r\n                    </div>\r\n                </div>\r\n                <div v-if=\"step===2\">\r\n                    <div class=\"layout-title\">详情图片</div>\r\n                    <div class=\"layout-content\">\r\n                        <upload :limit=\"30\" :file-list=\"details.map(i=>i.url)\" @success=\"uploadDetail\"\r\n                                @del=\"delDetail\"></upload>\r\n                    </div>\r\n                </div>\r\n                <div v-if=\"step===3\">\r\n                    <div class=\"layout-title\">商品规格\r\n                        <el-button @click=\"addSpecification\" size=\"mini\" icon=\"el-icon-plus\">新增</el-button>\r\n                    </div>\r\n                    <div v-for=\"(item,index) in specifications\" :key=\"index\" style=\"position: relative;\">\r\n                        <div class=\"layout-title\">\r\n                            <el-input style=\"width: 200px\" v-model=\"item.title\" placeholder=\"输入规格项\"/>\r\n                            <el-button style=\"margin-left: 10px\" icon=\"el-icon-plus\"\r\n                                       @click=\"addSpecificationValue(index)\">新增\r\n                            </el-button>\r\n                        </div>\r\n                        <div class=\"layout-content specification-wrapper\">\r\n                            <div class=\"attr-wrapper\" v-for=\"(p,i) in item.values\" :key=\"i\">\r\n                                <el-input v-model=\"p.value\" :placeholder=\"'输入'+item.title\"/>\r\n                                <div class=\"del\" @click=\"delSpecificationValue(index,i)\">x</div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"del-left\" @click=\"delSpecification(index)\">x</div>\r\n                    </div>\r\n                    <div class=\"layout-title\">商品规格\r\n                        <el-button @click=\"refreshSku\" size=\"mini\" icon=\"el-icon-refresh\">刷新</el-button>\r\n                    </div>\r\n                    <div class=\"sku-container\">\r\n                        <div class=\"sku-wrapper\" v-for=\"(item,index) in skus\" :key=\"index\">\r\n                            <el-form label-width=\"80px\">\r\n                                <el-form-item v-for=\"(s,i) in item.specifications\" :key=\"i\" :label=\"s.key\">\r\n                                    <el-input style=\"width: 200px\" v-model=\"s.value\" disabled/>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"价格\">\r\n                                    <el-input v-model=\"item.project_price\" style=\"width: 200px\" placeholder=\"输入价格\"/>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"库存\">\r\n                                    <el-input v-model=\"item.project_stock\" style=\"width: 200px\" placeholder=\"输入库存\"/>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"排序\">\r\n                                    <el-input v-model=\"item.specs_seq\" style=\"width: 200px\" placeholder=\"输入排序\"/>\r\n                                </el-form-item>\r\n                            </el-form>\r\n                            <div class=\"del\">x</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"layout-bottom\" v-if=\"step===1\">\r\n                <el-button size=\"mini\" icon=\"el-icon-arrow-left\" @click=\"back\">返回</el-button>\r\n                <el-button size=\"mini\" type=\"primary\" @click=\"changeStep(2)\">下一步</el-button>\r\n            </div>\r\n            <div class=\"layout-bottom\" v-if=\"step===2\">\r\n                <el-button size=\"mini\" @click=\"changeStep(1)\">上一步</el-button>\r\n                <el-button size=\"mini\" type=\"primary\" @click=\"changeStep(3)\">下一步</el-button>\r\n            </div>\r\n            <div class=\"layout-bottom\" v-if=\"step===3\">\r\n                <el-button size=\"mini\" @click=\"changeStep(2)\">上一步</el-button>\r\n                <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-upload2\" @click=\"save\">保存</el-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import MiniUpload from \"../../../components/upload-mini\";\r\n    import Upload from \"../../../components/upload\";\r\n    import {brand_options, goods_add} from \"../../../api/goods\";\r\n\r\n    export default {\r\n        name: \"index\",\r\n        components: {\r\n            Upload,\r\n            MiniUpload\r\n        },\r\n        data() {\r\n            return {\r\n                step: 1,\r\n                options: [],\r\n                form: {\r\n                    name: \"\",\r\n                    project_describe: \"\",\r\n                    brand_id: \"\",\r\n                },\r\n                rules: {\r\n                    name: [{required: true, message: '请输入'}],\r\n                    project_describe: [{required: true, message: '请输入'}],\r\n                    brand_id: [{required: true, message: '请选择'}],\r\n                },\r\n                albums: [],\r\n                details: [],\r\n                specifications: [],\r\n                skus: []\r\n            }\r\n        },\r\n        mounted() {\r\n            brand_options().then(res => {\r\n                this.options = res.list;\r\n            });\r\n        },\r\n        methods: {\r\n            back() {\r\n                this.$router.push({\r\n                    path: \"/goods/list\"\r\n                })\r\n            },\r\n            save() {\r\n                let params = {\r\n                    brand_id: this.form.brand_id + \"\",\r\n                    project_describe: this.form.project_describe,\r\n                    name: this.form.name,\r\n                };\r\n                if (this.albums.length === 0) {\r\n                    this.$message.error(\"请上传商品图片\");\r\n                }\r\n                let arr = this.albums.map(i => {\r\n                    return {\r\n                        is_default: \"0\",\r\n                        url: i.path\r\n                    }\r\n                });\r\n                arr[0].is_default = \"1\";\r\n                params.shop_image = arr;\r\n                params.details = this.details.map(i => i.path);\r\n                let attribute_key = {};\r\n                this.specifications.map(i => {\r\n                    attribute_key[i.title] = i.values.map(j => j.value);\r\n                });\r\n                params.attribute_key = attribute_key;\r\n                params.project_specs = this.skus.map(i => {\r\n                    let specs = i.specifications.map(j => {\r\n                        let r = {};\r\n                        r[j.key] = j.value;\r\n                        return r;\r\n                    });\r\n                    return {\r\n                        specs_seq: i.specs_seq,\r\n                        project_stock: i.project_stock,\r\n                        project_price: i.project_price,\r\n                        project_specs: specs\r\n                    }\r\n                });\r\n                goods_add(params).then(() => {\r\n                    this.$message.success(\"商品新增成功\");\r\n                })\r\n            },\r\n            uploadSpecPic(e, i1, i2) {\r\n                this.specifications[i1].values[i2].albums.push(e);\r\n            },\r\n            delSpecPic(e, i1, i2) {\r\n                this.specifications[i1].values[i2].albums.splice(e, 1);\r\n            },\r\n            changeStep(e) {\r\n                if (e === 2 && this.step === 1) {\r\n                    this.$refs['base-info'].validate(valid => {\r\n                        if (valid) {\r\n                            this.step = 2;\r\n                        }\r\n                    })\r\n                } else {\r\n                    this.step = e;\r\n                }\r\n            },\r\n            uploadAlbum(e) {\r\n                this.albums.push(e)\r\n            },\r\n            delAlbum(e) {\r\n                this.albums.splice(e, 1)\r\n            },\r\n            uploadDetail(e) {\r\n                this.details.push(e)\r\n            },\r\n            delDetail(e) {\r\n                this.details.splice(e, 1)\r\n            },\r\n            addAttribute() {\r\n                this.attributes.push({key: \"\", value: \"\"})\r\n            },\r\n            delAttribute(e) {\r\n                this.attributes.splice(e, 1)\r\n            },\r\n            delSpecification(i) {\r\n                this.specifications.splice(i)\r\n            },\r\n            addSpecification() {\r\n                this.specifications.push({\r\n                    title: '',\r\n                    values: []\r\n                })\r\n            },\r\n            addSpecificationValue(i) {\r\n                this.specifications[i].values.push({value: \"\"})\r\n            },\r\n            delSpecificationValue(i, i2) {\r\n                this.specifications[i].values.splice(i2, 1)\r\n            },\r\n            refreshSku() {\r\n                this.skus = [];\r\n                this.combinationSku(this.skus, this.specifications, [], 0);\r\n            },\r\n            combinationSku(skus, specifications, temp, index) {\r\n                if (specifications.length === index) {\r\n                    let arr = [];\r\n                    for (let i = 0; i < temp.length; i++) {\r\n                        arr.push({key: specifications[i].title, value: temp[i].value});\r\n                    }\r\n                    skus.push({\r\n                        specifications: arr,\r\n                        project_stock: \"0\",\r\n                        project_price: \"0\",\r\n                        specs_seq: \"0\"\r\n                    });\r\n                    return;\r\n                }\r\n                for (let i = 0; i < specifications[index].values.length; i++) {\r\n                    temp[index] = specifications[index].values[i];\r\n                    this.combinationSku(skus, specifications, temp, index + 1);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .layout-card {\r\n        background-color: #ffffff;\r\n        border-radius: 2px;\r\n        width: 100%;\r\n        height: 100%;\r\n        padding: 10px 20px;\r\n        box-sizing: border-box;\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n\r\n    .layout-title {\r\n        margin-top: 10px;\r\n        color: #333333;\r\n        font-weight: bold;\r\n        background-color: #f8f8f8;\r\n        padding: 15px 10px;\r\n    }\r\n\r\n    .layout-content {\r\n        margin-top: 15px;\r\n    }\r\n\r\n    .layout-head {\r\n        background-color: #f8f8f8;\r\n        display: flex;\r\n        margin: 10px 0 20px 0;\r\n    }\r\n\r\n    .layout-head div {\r\n        display: flex;\r\n        flex: 1;\r\n        height: 50px;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 16px;\r\n        color: #333333;\r\n        cursor: pointer;\r\n    }\r\n\r\n\r\n    .layout-active-title {\r\n        flex: 1;\r\n        color: #ffffff !important;\r\n        background-color: #36b368;\r\n        height: 100%;\r\n        text-align: center;\r\n        line-height: 50px;\r\n    }\r\n\r\n    .layout-active-label {\r\n        content: '';\r\n        width: 0;\r\n        height: 0;\r\n        border-top: 25px solid transparent;\r\n        border-left: 25px solid #36b368;\r\n        border-bottom: 25px solid transparent;\r\n    }\r\n\r\n    .layout-bottom {\r\n        width: 100%;\r\n        height: 50px;\r\n        background-color: #FAECDB;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n\r\n    .layout-container {\r\n        flex: 1;\r\n        overflow-y: auto;\r\n    }\r\n\r\n    .card-wrapper {\r\n        padding: 10px 10px;\r\n        border: 1px dashed #cccccc;\r\n        position: relative;\r\n        display: inline-block;\r\n        margin-top: 15px;\r\n    }\r\n\r\n    .card-wrapper:hover {\r\n        border: 1px dashed #36b368;\r\n    }\r\n\r\n    .del {\r\n        position: absolute;\r\n        color: #ff0000;\r\n        font-size: 20px;\r\n        right: -5px;\r\n        top: -12px;\r\n        cursor: pointer;\r\n        z-index: 9999;\r\n    }\r\n\r\n    .del-left {\r\n        position: absolute;\r\n        color: #ff0000;\r\n        font-size: 20px;\r\n        right: 0;\r\n        top: -12px;\r\n        cursor: pointer;\r\n        z-index: 9999;\r\n    }\r\n\r\n    .card-border, .card-border-active {\r\n        width: 100px;\r\n        height: 50px;\r\n        border-radius: 2px;\r\n        margin: 0 15px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 14px;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .card-border {\r\n        border: 1px solid #cccccc;\r\n    }\r\n\r\n    .card-border-active {\r\n        border: 1px solid #36b368;\r\n        color: #36b368;\r\n        position: relative;\r\n    }\r\n\r\n    .card-border-active::after {\r\n        position: absolute;\r\n        content: \"√\";\r\n        color: #ffffff;\r\n        width: 0;\r\n        height: 0;\r\n        border-top: 10px solid transparent;\r\n        border-left: 10px solid #36b368;\r\n        border-bottom: 10px solid transparent;\r\n        transform: rotate(45deg);\r\n        bottom: -7px;\r\n        right: -2px;\r\n    }\r\n\r\n    .card-border-wrapper {\r\n        display: flex;\r\n    }\r\n\r\n    .attr-wrapper {\r\n        width: 200px;\r\n        padding: 10px;\r\n        border: 1px dashed #cccccc;\r\n        position: relative;\r\n        margin: 0 15px;\r\n    }\r\n\r\n    .specification-wrapper {\r\n        display: flex;\r\n    }\r\n\r\n    .sku-wrapper {\r\n        width: 500px;\r\n        padding: 30px 0;\r\n        border: 1px dashed #cccccc;\r\n        margin: 20px 0;\r\n        position: relative;\r\n    }\r\n\r\n    .sku-container {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: space-between;\r\n        box-sizing: border-box;\r\n        padding: 5px;\r\n    }\r\n\r\n</style>"]}]}