{"remainingRequest":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\shop-frontend\\boss-app\\src\\router\\index.js","dependencies":[{"path":"D:\\workspace\\shop-frontend\\boss-app\\src\\router\\index.js","mtime":1632657768574},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632657941567},{"path":"D:\\workspace\\shop-frontend\\boss-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1632657941543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgUm91dGVyIGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgcm91dGVzIGZyb20gIi4vcm91dGUiOwppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7CmltcG9ydCAnbnByb2dyZXNzL25wcm9ncmVzcy5jc3MnOwppbXBvcnQgeyBnZXRfdG9rZW4gfSBmcm9tICcuLi91dGlsL3Rva2VuJzsKVnVlLnVzZShSb3V0ZXIpOwp2YXIgcm91dGUgPSBuZXcgUm91dGVyKHsKICByb3V0ZXM6IHJvdXRlcwp9KTsKLyoqDQogKiDnmb3lkI3ljZUNCiAqLwoKdmFyIHdoaXRlTGlzdCA9IFsnL2xvZ2luJ107Ci8qKg0KICog5YmN572u6ZKp5a2QDQogKi8KCnJvdXRlLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgaWYgKHRvLm1ldGEudGl0bGUpIHsKICAgIGRvY3VtZW50LnRpdGxlID0gdG8ubWV0YS50aXRsZTsKICB9CgogIE5Qcm9ncmVzcy5zdGFydCgpOwogIHZhciB0b2tlbiA9IGdldF90b2tlbigpOwoKICBpZiAodG9rZW4pIHsKICAgIGlmICh0by5wYXRoID09PSAnL2xvZ2luJykgewogICAgICBuZXh0KHsKICAgICAgICBwYXRoOiAnLycKICAgICAgfSk7CiAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KCk7CiAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmICh3aGl0ZUxpc3QuaW5kZXhPZih0by5wYXRoKSAhPT0gLTEpIHsKICAgICAgbmV4dCgpOwogICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgfSBlbHNlIHsKICAgICAgLy8g5ZCm5YiZ5YWo6YOo6YeN5a6a5ZCR5Yiw55m75b2V6aG1CiAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICB9CiAgfQp9KTsKLyoqDQogKiDlkI7nva7pkqnlrZANCiAqLwoKcm91dGUuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICAvLyDnu5PmnZ9Qcm9ncmVzcwogIE5Qcm9ncmVzcy5kb25lKCk7Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZTs="},{"version":3,"sources":["D:/workspace/shop-frontend/boss-app/src/router/index.js"],"names":["Vue","Router","routes","NProgress","get_token","use","route","whiteList","beforeEach","to","from","next","meta","title","document","start","token","path","done","indexOf","afterEach"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,MAAP,MAAmB,SAAnB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AAEA,SAAQC,SAAR,QAAwB,eAAxB;AAEAJ,GAAG,CAACK,GAAJ,CAAQJ,MAAR;AAEA,IAAMK,KAAK,GAAG,IAAIL,MAAJ,CAAW;AACrBC,EAAAA,MAAM,EAANA;AADqB,CAAX,CAAd;AAIA;AACA;AACA;;AACA,IAAMK,SAAS,GAAG,CAAC,QAAD,CAAlB;AAEA;AACA;AACA;;AACAD,KAAK,CAACE,UAAN,CAAiB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACjC,MAAIF,EAAE,CAACG,IAAH,CAAQC,KAAZ,EAAmB;AACfC,IAAAA,QAAQ,CAACD,KAAT,GAAiBJ,EAAE,CAACG,IAAH,CAAQC,KAAzB;AACH;;AACDV,EAAAA,SAAS,CAACY,KAAV;AACA,MAAIC,KAAK,GAAGZ,SAAS,EAArB;;AACA,MAAIY,KAAJ,EAAW;AACP,QAAIP,EAAE,CAACQ,IAAH,KAAY,QAAhB,EAA0B;AACtBN,MAAAA,IAAI,CAAC;AAACM,QAAAA,IAAI,EAAE;AAAP,OAAD,CAAJ;AACAd,MAAAA,SAAS,CAACe,IAAV;AACH,KAHD,MAGO;AACHP,MAAAA,IAAI;AACJR,MAAAA,SAAS,CAACe,IAAV;AACH;AACJ,GARD,MAQO;AACH,QAAIX,SAAS,CAACY,OAAV,CAAkBV,EAAE,CAACQ,IAArB,MAA+B,CAAC,CAApC,EAAuC;AACnCN,MAAAA,IAAI;AACJR,MAAAA,SAAS,CAACe,IAAV;AACH,KAHD,MAGO;AACH;AACAP,MAAAA,IAAI,2BAAoBF,EAAE,CAACQ,IAAvB,EAAJ;AACAd,MAAAA,SAAS,CAACe,IAAV;AACH;AACJ;AAEJ,CAzBD;AA2BA;AACA;AACA;;AACAZ,KAAK,CAACc,SAAN,CAAgB,YAAM;AAClB;AACAjB,EAAAA,SAAS,CAACe,IAAV;AACH,CAHD;AAKA,eAAeZ,KAAf","sourcesContent":["import Vue from \"vue\";\r\nimport Router from \"vue-router\";\r\nimport routes from \"./route\";\r\nimport NProgress from 'nprogress';\r\nimport 'nprogress/nprogress.css';\r\n\r\nimport {get_token} from '../util/token'\r\n\r\nVue.use(Router);\r\n\r\nconst route = new Router({\r\n    routes\r\n});\r\n\r\n/**\r\n * 白名单\r\n */\r\nconst whiteList = ['/login'];\r\n\r\n/**\r\n * 前置钩子\r\n */\r\nroute.beforeEach((to, from, next) => {\r\n    if (to.meta.title) {\r\n        document.title = to.meta.title\r\n    }\r\n    NProgress.start();\r\n    let token = get_token();\r\n    if (token) {\r\n        if (to.path === '/login') {\r\n            next({path: '/'});\r\n            NProgress.done()\r\n        } else {\r\n            next();\r\n            NProgress.done()\r\n        }\r\n    } else {\r\n        if (whiteList.indexOf(to.path) !== -1) {\r\n            next();\r\n            NProgress.done()\r\n        } else {\r\n            // 否则全部重定向到登录页\r\n            next(`/login?redirect=${to.path}`)\r\n            NProgress.done()\r\n        }\r\n    }\r\n\r\n});\r\n\r\n/**\r\n * 后置钩子\r\n */\r\nroute.afterEach(() => {\r\n    // 结束Progress\r\n    NProgress.done()\r\n});\r\n\r\nexport default route;\r\n"]}]}